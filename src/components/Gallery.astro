<div class="container mx-auto w-11/12">
    <div class="grid gap-4">
        <div class="flex justify-center">
            <img
                class="h-auto max-w-full rounded-lg main-image animate__animated"
                src="/gallery/gallery1.jpg"
                alt=""
            />
        </div>
        <div class="grid grid-cols-5 gap-4">
            <div class="cursor-pointer">
                <img
                    class="h-auto max-w-full rounded-lg"
                    src="/gallery/gallery1.jpg"
                    alt=""
                />
            </div>
            <div class="cursor-pointer">
                <img
                    class="h-auto max-w-full rounded-lg"
                    src="/gallery/gallery2.jpg"
                    alt=""
                />
            </div>
            <div class="cursor-pointer">
                <img
                    class="h-auto max-w-full rounded-lg"
                    src="/gallery/gallery3.jpg"
                    alt=""
                />
            </div>
            <div class="cursor-pointer">
                <img
                    class="h-auto max-w-full rounded-lg"
                    src="/gallery/gallery4.jpg"
                    alt=""
                />
            </div>
            <div class="cursor-pointer">
                <img
                    class="h-auto max-w-full rounded-lg"
                    src="/gallery/gallery5.jpg"
                    alt=""
                />
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const mainImg = document.querySelector(".main-image");
        const thumbs = Array.from(
            document.querySelectorAll(".grid.grid-cols-5 img"),
        );
        let current = 0;
        // Cambio automático cada 4 segundos sin repetir la imagen actual
        setInterval(() => {
            if (!mainImg || thumbs.length === 0) return;
            let next = (current + 1) % thumbs.length;
            // Evitar repetir la imagen actual
            const currentSrc = mainImg.getAttribute("src");
            if (thumbs[next].getAttribute("src") === currentSrc) {
                next = (next + 1) % thumbs.length;
            }
            mainImg.classList.remove("animate__fadeIn");
            mainImg.setAttribute("src", thumbs[next].getAttribute("src"));
            void (mainImg instanceof HTMLImageElement
                ? mainImg.offsetWidth
                : 0);
            mainImg.classList.add("animate__fadeIn");
            current = next;
        }, 6000);

        // Cambio manual al hacer clic
        document
            .querySelectorAll(".grid.grid-cols-5 .cursor-pointer")
            .forEach((div, idx) => {
                div.addEventListener("click", function () {
                    const thumbImg = this.querySelector("img");
                    if (mainImg && thumbImg) {
                        mainImg.classList.remove("animate__fadeIn");
                        mainImg.setAttribute(
                            "src",
                            thumbImg.getAttribute("src"),
                        );
                        void mainImg.offsetWidth;
                        mainImg.classList.add("animate__fadeIn");
                        current = idx; // Actualiza el índice para el auto cambio
                    }
                });
            });
    });
</script>
